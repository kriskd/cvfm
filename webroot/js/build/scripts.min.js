!function($){var allImages={},imageCounter=0;$.galleriffic={version:"2.0.1",normalizeHash:function(hash){return hash.replace(/^.*#/,"").replace(/\?.*$/,"")},getImage:function(hash){return hash?(hash=$.galleriffic.normalizeHash(hash),allImages[hash]):void 0},gotoImage:function(hash){var imageData=$.galleriffic.getImage(hash);if(!imageData)return!1;var gallery=imageData.gallery;return gallery.gotoImage(imageData),!0},removeImageByHash:function(hash,ownerGallery){var imageData=$.galleriffic.getImage(hash);if(!imageData)return!1;var gallery=imageData.gallery;return ownerGallery&&ownerGallery!=gallery?!1:gallery.removeImageByIndex(imageData.index)}};var defaults={delay:3e3,numThumbs:20,preloadAhead:40,enableTopPager:!1,enableBottomPager:!0,maxPagesToShow:7,imageContainerSel:"",captionContainerSel:"",controlsContainerSel:"",loadingContainerSel:"",renderSSControls:!0,renderNavControls:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"Previous",nextLinkText:"Next",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableHistory:!1,enableKeyboardNavigation:!0,autoStart:!1,syncTransitions:!1,defaultTransitionDuration:1e3,onSlideChange:void 0,onTransitionOut:void 0,onTransitionIn:void 0,onPageTransitionOut:void 0,onPageTransitionIn:void 0,onImageAdded:void 0,onImageRemoved:void 0};$.fn.galleriffic=function(settings){$.extend(this,{version:$.galleriffic.version,isSlideshowRunning:!1,slideshowTimeout:void 0,clickHandler:function(e,link){if(this.pause(),!this.enableHistory){var hash=$.galleriffic.normalizeHash($(link).attr("href"));$.galleriffic.gotoImage(hash),e.preventDefault()}},appendImage:function(listItem){return this.addImage(listItem,!1,!1),this},insertImage:function(listItem,position){return this.addImage(listItem,!1,!0,position),this},addImage:function(listItem,thumbExists,insert,position){var $li="string"==typeof listItem?$(listItem):listItem,$aThumb=$li.find("a.thumb"),slideUrl=$aThumb.attr("href"),title=$aThumb.attr("title"),$caption=$li.find(".caption").remove(),hash=$aThumb.attr("name");imageCounter++,(!hash||allImages[""+hash])&&(hash=imageCounter),insert||(position=this.data.length);var imageData={title:title,slideUrl:slideUrl,caption:$caption,hash:hash,gallery:this,index:position};insert?(this.data.splice(position,0,imageData),this.updateIndices(position)):this.data.push(imageData);var gallery=this;return thumbExists||this.updateThumbs(function(){var $thumbsUl=gallery.find("ul.thumbs");insert?$thumbsUl.children(":eq("+position+")").before($li):$thumbsUl.append($li),gallery.onImageAdded&&gallery.onImageAdded(imageData,$li)}),allImages[""+hash]=imageData,$aThumb.attr("rel","history").attr("href","#"+hash).removeAttr("name").click(function(e){gallery.clickHandler(e,this)}),this},removeImageByIndex:function(index){if(0>index||index>=this.data.length)return!1;var imageData=this.data[index];return imageData?(this.removeImage(imageData),!0):!1},removeImageByHash:function(hash){return $.galleriffic.removeImageByHash(hash,this)},removeImage:function(imageData){var index=imageData.index;return this.data.splice(index,1),delete allImages[""+imageData.hash],this.updateThumbs(function(){var $li=gallery.find("ul.thumbs").children(":eq("+index+")").remove();gallery.onImageRemoved&&gallery.onImageRemoved(imageData,$li)}),this.updateIndices(index),this},updateIndices:function(startIndex){for(i=startIndex;i<this.data.length;i++)this.data[i].index=i;return this},initializeThumbs:function(){this.data=[];var gallery=this;return this.find("ul.thumbs > li").each(function(){gallery.addImage($(this),!0,!1)}),this},isPreloadComplete:!1,preloadInit:function(){if(0==this.preloadAhead)return this;this.preloadStartIndex=this.currentImage.index;var nextIndex=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,nextIndex)},preloadRelocate:function(index){return this.preloadStartIndex=index,this},preloadRecursive:function(startIndex,currentIndex){if(startIndex!=this.preloadStartIndex){var nextIndex=this.getNextIndex(this.preloadStartIndex);return this.preloadRecursive(this.preloadStartIndex,nextIndex)}var gallery=this,preloadCount=currentIndex-startIndex;if(0>preloadCount&&(preloadCount=this.data.length-1-startIndex+currentIndex),this.preloadAhead>=0&&preloadCount>this.preloadAhead)return setTimeout(function(){gallery.preloadRecursive(startIndex,currentIndex)},500),this;var imageData=this.data[currentIndex];if(!imageData)return this;if(imageData.image)return this.preloadNext(startIndex,currentIndex);var image=new Image;return image.onload=function(){imageData.image=this,gallery.preloadNext(startIndex,currentIndex)},image.alt=imageData.title,image.src=imageData.slideUrl,this},preloadNext:function(startIndex,currentIndex){var nextIndex=this.getNextIndex(currentIndex);if(nextIndex==startIndex)this.isPreloadComplete=!0;else{var gallery=this;setTimeout(function(){gallery.preloadRecursive(startIndex,nextIndex)},100)}return this},getNextIndex:function(index){var nextIndex=index+1;return nextIndex>=this.data.length&&(nextIndex=0),nextIndex},getPrevIndex:function(index){var prevIndex=index-1;return 0>prevIndex&&(prevIndex=this.data.length-1),prevIndex},pause:function(){return this.isSlideshowRunning=!1,this.slideshowTimeout&&(clearTimeout(this.slideshowTimeout),this.slideshowTimeout=void 0),this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("play").attr("title",this.playLinkText).attr("href","#play").html(this.playLinkText),this},play:function(){if(this.isSlideshowRunning=!0,this.$controlsContainer&&this.$controlsContainer.find("div.ss-controls a").removeClass().addClass("pause").attr("title",this.pauseLinkText).attr("href","#pause").html(this.pauseLinkText),!this.slideshowTimeout){var gallery=this;this.slideshowTimeout=setTimeout(function(){gallery.ssAdvance()},this.delay)}return this},toggleSlideshow:function(){return this.isSlideshowRunning?this.pause():this.play(),this},ssAdvance:function(){return this.isSlideshowRunning&&this.next(!0),this},next:function(dontPause,bypassHistory){return this.gotoIndex(this.getNextIndex(this.currentImage.index),dontPause,bypassHistory),this},previous:function(dontPause,bypassHistory){return this.gotoIndex(this.getPrevIndex(this.currentImage.index),dontPause,bypassHistory),this},nextPage:function(dontPause,bypassHistory){var page=this.getCurrentPage(),lastPage=this.getNumPages()-1;if(lastPage>page){var startIndex=page*this.numThumbs,nextPage=startIndex+this.numThumbs;this.gotoIndex(nextPage,dontPause,bypassHistory)}return this},previousPage:function(dontPause,bypassHistory){var page=this.getCurrentPage();if(page>0){var startIndex=page*this.numThumbs,prevPage=startIndex-this.numThumbs;this.gotoIndex(prevPage,dontPause,bypassHistory)}return this},gotoIndex:function(index,dontPause,bypassHistory){dontPause||this.pause(),0>index?index=0:index>=this.data.length&&(index=this.data.length-1);var imageData=this.data[index];return!bypassHistory&&this.enableHistory?$.historyLoad(String(imageData.hash)):this.gotoImage(imageData),this},gotoImage:function(imageData){var index=imageData.index;return this.onSlideChange&&this.onSlideChange(this.currentImage.index,index),this.currentImage=imageData,this.preloadRelocate(index),this.refresh(),this},getDefaultTransitionDuration:function(isSync){return isSync?this.defaultTransitionDuration:this.defaultTransitionDuration/2},refresh:function(){var imageData=this.currentImage;if(!imageData)return this;var index=imageData.index;this.$controlsContainer&&this.$controlsContainer.find("div.nav-controls a.prev").attr("href","#"+this.data[this.getPrevIndex(index)].hash).end().find("div.nav-controls a.next").attr("href","#"+this.data[this.getNextIndex(index)].hash);var previousSlide=this.$imageContainer.find("span.current").addClass("previous").removeClass("current"),previousCaption=0;this.$captionContainer&&(previousCaption=this.$captionContainer.find("span.current").addClass("previous").removeClass("current"));var isSync=this.syncTransitions&&imageData.image,isTransitioning=!0,gallery=this,transitionOutCallback=function(){isTransitioning=!1,previousSlide.remove(),previousCaption&&previousCaption.remove(),isSync||(imageData.image&&imageData.hash==gallery.data[gallery.currentImage.index].hash?gallery.buildImage(imageData,isSync):gallery.$loadingContainer&&gallery.$loadingContainer.show())};if(0==previousSlide.length?transitionOutCallback():this.onTransitionOut?this.onTransitionOut(previousSlide,previousCaption,isSync,transitionOutCallback):(previousSlide.fadeTo(this.getDefaultTransitionDuration(isSync),0,transitionOutCallback),previousCaption&&previousCaption.fadeTo(this.getDefaultTransitionDuration(isSync),0)),isSync&&this.buildImage(imageData,isSync),!imageData.image){var image=new Image;image.onload=function(){imageData.image=this,isTransitioning||imageData.hash!=gallery.data[gallery.currentImage.index].hash||gallery.buildImage(imageData,isSync)},image.alt=imageData.title,image.src=imageData.slideUrl}return this.relocatePreload=!0,this.syncThumbs()},buildImage:function(imageData,isSync){var gallery=this,nextIndex=this.getNextIndex(imageData.index),newSlide=this.$imageContainer.append('<span class="image-wrapper current"><a class="advance-link" rel="history" href="#'+this.data[nextIndex].hash+'" title="'+imageData.title+'">&nbsp;</a></span>').find("span.current").css("opacity","0");newSlide.find("a").append(imageData.image).click(function(e){gallery.clickHandler(e,this)});var newCaption=0;return this.$captionContainer&&(newCaption=this.$captionContainer.append('<span class="image-caption current"></span>').find("span.current").css("opacity","0").append(imageData.caption)),this.$loadingContainer&&this.$loadingContainer.hide(),this.onTransitionIn?this.onTransitionIn(newSlide,newCaption,isSync):(newSlide.fadeTo(this.getDefaultTransitionDuration(isSync),1),newCaption&&newCaption.fadeTo(this.getDefaultTransitionDuration(isSync),1)),this.isSlideshowRunning&&(this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.slideshowTimeout=setTimeout(function(){gallery.ssAdvance()},this.delay)),this},getCurrentPage:function(){return Math.floor(this.currentImage.index/this.numThumbs)},syncThumbs:function(){var page=this.getCurrentPage();page!=this.displayedPage&&this.updateThumbs();var $thumbs=this.find("ul.thumbs").children();return $thumbs.filter(".selected").removeClass("selected"),$thumbs.eq(this.currentImage.index).addClass("selected"),this},updateThumbs:function(postTransitionOutHandler){var gallery=this,transitionOutCallback=function(){postTransitionOutHandler&&postTransitionOutHandler(),gallery.rebuildThumbs(),gallery.onPageTransitionIn?gallery.onPageTransitionIn():gallery.show()};return this.onPageTransitionOut?this.onPageTransitionOut(transitionOutCallback):(this.hide(),transitionOutCallback()),this},rebuildThumbs:function(){var needsPagination=this.data.length>this.numThumbs;if(this.enableTopPager){var $topPager=this.find("div.top");0==$topPager.length?$topPager=this.prepend('<div class="top pagination"></div>').find("div.top"):$topPager.empty(),needsPagination&&this.buildPager($topPager)}if(this.enableBottomPager){var $bottomPager=this.find("div.bottom");0==$bottomPager.length?$bottomPager=this.append('<div class="bottom pagination"></div>').find("div.bottom"):$bottomPager.empty(),needsPagination&&this.buildPager($bottomPager)}var page=this.getCurrentPage(),startIndex=page*this.numThumbs,stopIndex=startIndex+this.numThumbs-1;stopIndex>=this.data.length&&(stopIndex=this.data.length-1);var $thumbsUl=this.find("ul.thumbs");return $thumbsUl.find("li").each(function(i){var $li=$(this);i>=startIndex&&stopIndex>=i?$li.show():$li.hide()}),this.displayedPage=page,$thumbsUl.removeClass("noscript"),this},getNumPages:function(){return Math.ceil(this.data.length/this.numThumbs)},buildPager:function(pager){var gallery=this,numPages=this.getNumPages(),page=this.getCurrentPage(),startIndex=page*this.numThumbs,pagesRemaining=this.maxPagesToShow-1,pageNum=page-Math.floor((this.maxPagesToShow-1)/2)+1;if(pageNum>0){var remainingPageCount=numPages-pageNum;pagesRemaining>remainingPageCount&&(pageNum-=pagesRemaining-remainingPageCount)}if(0>pageNum&&(pageNum=0),page>0){var prevPage=startIndex-this.numThumbs;pager.append('<a rel="history" href="#'+this.data[prevPage].hash+'" title="'+this.prevPageLinkText+'">'+this.prevPageLinkText+"</a>")}for(pageNum>0&&(this.buildPageLink(pager,0,numPages),pageNum>1&&pager.append('<span class="ellipsis">&hellip;</span>'),pagesRemaining--);pagesRemaining>0;)this.buildPageLink(pager,pageNum,numPages),pagesRemaining--,pageNum++;if(numPages>pageNum){var lastPageNum=numPages-1;lastPageNum>pageNum&&pager.append('<span class="ellipsis">&hellip;</span>'),this.buildPageLink(pager,lastPageNum,numPages)}var nextPage=startIndex+this.numThumbs;return nextPage<this.data.length&&pager.append('<a rel="history" href="#'+this.data[nextPage].hash+'" title="'+this.nextPageLinkText+'">'+this.nextPageLinkText+"</a>"),pager.find("a").click(function(e){gallery.clickHandler(e,this)}),this},buildPageLink:function(pager,pageNum,numPages){var pageLabel=pageNum+1,currentPage=this.getCurrentPage();if(pageNum==currentPage)pager.append('<span class="current">'+pageLabel+"</span>");else if(numPages>pageNum){var imageIndex=pageNum*this.numThumbs;pager.append('<a rel="history" href="#'+this.data[imageIndex].hash+'" title="'+pageLabel+'">'+pageLabel+"</a>")}return this}}),$.extend(this,defaults,settings),this.enableHistory&&!$.historyInit&&(this.enableHistory=!1),this.imageContainerSel&&(this.$imageContainer=$(this.imageContainerSel)),this.captionContainerSel&&(this.$captionContainer=$(this.captionContainerSel)),this.loadingContainerSel&&(this.$loadingContainer=$(this.loadingContainerSel)),this.initializeThumbs(),this.maxPagesToShow<3&&(this.maxPagesToShow=3),this.displayedPage=-1,this.currentImage=this.data[0];var gallery=this;this.$loadingContainer&&this.$loadingContainer.hide(),this.controlsContainerSel&&(this.$controlsContainer=$(this.controlsContainerSel).empty(),this.renderSSControls&&(this.autoStart?this.$controlsContainer.append('<div class="ss-controls"><a href="#pause" class="pause" title="'+this.pauseLinkText+'">'+this.pauseLinkText+"</a></div>"):this.$controlsContainer.append('<div class="ss-controls"><a href="#play" class="play" title="'+this.playLinkText+'">'+this.playLinkText+"</a></div>"),this.$controlsContainer.find("div.ss-controls a").click(function(e){return gallery.toggleSlideshow(),e.preventDefault(),!1})),this.renderNavControls&&this.$controlsContainer.append('<div class="nav-controls"><a class="prev" rel="history" title="'+this.prevLinkText+'">'+this.prevLinkText+'</a><a class="next" rel="history" title="'+this.nextLinkText+'">'+this.nextLinkText+"</a></div>").find("div.nav-controls a").click(function(e){gallery.clickHandler(e,this)}));var initFirstImage=!this.enableHistory||!location.hash;if(this.enableHistory&&location.hash){var hash=$.galleriffic.normalizeHash(location.hash),imageData=allImages[hash];imageData||(initFirstImage=!0)}return initFirstImage&&this.gotoIndex(0,!1,!0),this.enableKeyboardNavigation&&$(document).keydown(function(e){var key=e.charCode?e.charCode:e.keyCode?e.keyCode:0;switch(key){case 32:gallery.next(),e.preventDefault();break;case 33:gallery.previousPage(),e.preventDefault();break;case 34:gallery.nextPage(),e.preventDefault();break;case 35:gallery.gotoIndex(gallery.data.length-1),e.preventDefault();break;case 36:gallery.gotoIndex(0),e.preventDefault();break;case 37:gallery.previous(),e.preventDefault();break;case 39:gallery.next(),e.preventDefault()}}),this.autoStart&&this.play(),setTimeout(function(){gallery.preloadInit()},1e3),this}}(jQuery),+function($){"use strict";var Modal=function(element,options){this.options=options,this.$element=$(element),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this[this.isShown?"hide":"show"](_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(document.body),that.$element.show(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in").attr("aria-hidden",!1),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$element.find(".modal-dialog").one($.support.transition.end,function(){that.$element.focus().trigger(e)}).emulateTransitionEnd(300):that.$element.focus().trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one($.support.transition.end,$.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.focus()},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.removeBackdrop(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback).emulateTransitionEnd(150):callback()):callback&&callback()};var old=$.fn.modal;$.fn.modal=function(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})},$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault(),$target.modal(option,this).one("hide",function(){$this.is(":visible")&&$this.focus()})}),$(document).on("show.bs.modal",".modal",function(){$(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){$(document.body).removeClass("modal-open")})}(jQuery),+function($){"use strict";var Tooltip=function(element,options){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",element,options)};Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},Tooltip.prototype.init=function(type,element,options){this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options);for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focus",eventOut="hover"==trigger?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show),void 0):self.show()},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide),void 0):self.hide()},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var $tip=this.tip();this.setContent(),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var $parent=this.$element.parent(),orgPlacement=placement,docScroll=document.documentElement.scrollTop||document.body.scrollTop,parentWidth="body"==this.options.container?window.innerWidth:$parent.outerWidth(),parentHeight="body"==this.options.container?window.innerHeight:$parent.outerHeight(),parentLeft="body"==this.options.container?0:$parent.offset().left;placement="bottom"==placement&&pos.top+pos.height+actualHeight-docScroll>parentHeight?"top":"top"==placement&&pos.top-docScroll-actualHeight<0?"bottom":"right"==placement&&pos.right+actualWidth>parentWidth?"left":"left"==placement&&pos.left-actualWidth<parentLeft?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement),this.$element.trigger("shown.bs."+this.type)}},Tooltip.prototype.applyPlacement=function(offset,placement){var replace,$tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top=offset.top+marginTop,offset.left=offset.left+marginLeft,$tip.offset(offset).addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if("top"==placement&&actualHeight!=height&&(replace=!0,offset.top=offset.top+height-actualHeight),/bottom|top/.test(placement)){var delta=0;offset.left<0&&(delta=-2*offset.left,offset.left=0,$tip.offset(offset),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight),this.replaceArrow(delta-width+actualWidth,actualWidth,"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");replace&&$tip.offset(offset)},Tooltip.prototype.replaceArrow=function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(){function complete(){"in"!=that.hoverState&&$tip.detach()}var that=this,$tip=this.tip(),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&this.$tip.hasClass("fade")?$tip.one($.support.transition.end,complete).emulateTransitionEnd(150):complete(),this.$element.trigger("hidden.bs."+this.type),this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function(){var el=this.$element[0];return $.extend({},"function"==typeof el.getBoundingClientRect?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=e?$(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]()})},$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),$(document).ready(function(){function reportError(msg){return $(".payment-errors").show().text(msg).addClass("error"),$(".submit-payment").prop("disabled",!1),!1}var name="info",domain="capitolviewfarmersmarket.com";if($(".email-mailto").append('<a href="mailto:'+name+"@"+domain+'">'+name+"@"+domain+"</a>"),$(".launch-tooltip").tooltip(),$(".required label").append(' <span class="required">*</span>'),$("#accordion").accordion({heightStyle:"content"}),$(document).on("click",".fire-modal",function(){var action=$(this).data("action");return $.ajax({url:"/admin/"+action,dataType:"html",success:function(data){$("body").append(data),$(".modal").modal("show")}}),!1}),$(".confirm").click(function(){var answer=confirm("Do you want to delete?");return answer?!0:!1}),$("select#ProductVendorsProductType").change(function(){$(".products").empty();var item=$(this).val(),html='<select name="data[Vendor][product_id]"><option value=""></option>';$.get("/products/get_products/"+item,function(data){for(var i=0;i<data.length;i++){var product_arr=data[i];for(var key in product_arr)if("Product"==key){var product=product_arr[key];html+="<option value="+product.id+'">'+product.name+"</option>"}}html+="</select>",$(".products").append(html)},"json")}),$("select.products").change(function(){$(this).addClass("selected-category"),$(".products .results").empty();var item=Number($(this).val());if($("select.products").each(function(){$(this).hasClass("selected-category")||$(this).find("option:eq(0)").attr("selected","selected")}),$(this).removeClass("selected-category"),item>0){var html="";$.get("/products/get_vendors/"+item,function(data){if(data.length>0){for(var i=0;i<data.length;i++)html+='<div class="vendor"><p><strong>'+data[i][0]+"</strong> "+data[i][1]+"</p><p>"+data[i][2]+"</p></div>";$(".products .results").prepend(html)}else $(".products .results").prepend("<p>No vendors carry this product.</p>")},"json")}else $(".products .results").prepend("<p>Please select a product</p>")}),$(".sponsor").length>0){var count=1,biggestHeight=0;$(".sponsor").each(function(){if(!$(this).hasClass("gold")&&!$(this).hasClass("silver")){var thisHeight=$(this).height();if(thisHeight>biggestHeight&&(biggestHeight=thisHeight),count%4==0){for(var current=$(".sponsor").index(this),i=current-3;current>=i;i++)$(".sponsor:eq("+i+")").height(biggestHeight);biggestHeight=0}count++}})}"#thumbs".length>0&&$("#thumbs").galleriffic({delay:1e4,numThumbs:17,imageContainerSel:"#image",controlsContainerSel:"#controls",autoStart:!0,playLinkText:"Play",pauseLinkText:"Pause",prevLinkText:"&lsaquo; Previous",nextLinkText:"Next &rsaquo;",nextPageLinkText:"Next &rsaquo;",prevPageLinkText:"&lsaquo; Prev",enableKeyboardNavigation:!1}),$(document).on("submit","#VendorAddForm",function(){$(".submit input").attr("disabled","disabled");var form=$(this),error=!1,ccNum=$(".card-number").val(),cvcNum=$(".card-cvc").val(),expMonth=$(".card-expiry-month").val(),expYear=$(".card-expiry-year").val();return Stripe.validateCardNumber(ccNum)||(error=!0,reportError("The credit card number appears to be invalid.")),Stripe.validateCVC(cvcNum)||(error=!0,reportError("The CVC number appears to be invalid.")),Stripe.validateExpiry(expMonth,expYear)||(error=!0,reportError("The expiration date appears to be invalid.")),error||Stripe.createToken(form,function(status,response){var token=response.id;form.append($('<input type="hidden" name="stripeToken" />').val(token)),form.get(0).submit()}),!1})});